<% @recommended.each do |content| %>
  <% if content.class.name == "Card" %>
    <% card = content %>
    <%# For exploring purpose, current_user might be null. Then determine if 
        the card is explorable. %>
    <% if current_user.nil? %>
      <% if card.explorable? %>
	<% card_front = JSON.parse(card.front_content) %>
	<% card_back = JSON.parse(card.back_content) %>
	<%= render_card(card, "home-card") %>
      <% end %>
    <% else %>
      <% if card.viewable_by? current_user %>
	<%= render_card(card, "home-card") %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
